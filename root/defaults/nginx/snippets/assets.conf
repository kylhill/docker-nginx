location ~* \.(?:avif|css|eot|gif|ico|jpeg|jpg|js|map|mjs|otf|png|svg|ttf|webp|woff|woff2)$ {
    # Cache static assets
    proxy_cache STATIC;
    proxy_cache_valid 200 301 1h;
    proxy_cache_valid any 1m;

    proxy_cache_bypass 0;
    proxy_no_cache 0;

    # Always revalidate if client requests fresh version
    proxy_cache_revalidate on;

    # Serve stale content if backend is down
    proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;

    # Add caching headers
    expires 30d;
    add_header Cache-Control "public, max-age=2592000, s-maxage=86400, immutable";

    proxy_ignore_headers Cache-Control Expires Set-Cookie;

    # Disable auth and access logging for assets
    auth_request off;
    access_log off;

    try_files "" @proxy;
}
